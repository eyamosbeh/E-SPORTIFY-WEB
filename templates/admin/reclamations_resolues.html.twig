{% extends 'basee.html.twig' %}

{% block title %}Réclamations résolues{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="{{ asset('dashboard/style.css') }}">
    <style>
        body {
            background-color: white !important;
        }
        #content {
            background-color: white !important;
        }
        .card {
            background-color: white !important;
        }
        .card-header {
            background-color: white !important;
        }
        .card-body {
            background-color: white !important;
        }
        .breadcrumb {
            background-color: white !important;
        }
        .list-group-item {
            background-color: white !important;
        }
        .modal-content {
            background-color: white !important;
        }
        .bg-light {
            background-color: white !important;
        }
        .bg-dark-purple {
            background-color: white !important;
        }
        .bg-oxford-blue {
            background-color: white !important;
        }
        table {
            background-color: white !important;
        }
    </style>
{% endblock %}

{% block body %}
<!-- SIDEBAR -->
<section id="sidebar">
    <a href="#" class="brand">
        <img src="{{ asset('navbar/img/E-SPORTIFY.png') }}" alt="E-SPORTIFY" style="width: 180px; height: auto; margin-left: 10px;">
    </a>
    <ul class="side-menu top">
        <li class="active">
            <a href="{{ path('app_dashboard_admin') }}">
                <i class='bx bxs-dashboard' ></i>
                <span class="text">Dashboard</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class='bx bxs-shopping-bag-alt' ></i>
                <span class="text">My Store</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class='bx bxs-doughnut-chart' ></i>
                <span class="text">Analytics</span>
            </a>
        </li>
        <li>
            <a href="{{ path('app_admin_dashboard') }}">
                <i class='bx bxs-message-dots' ></i>
                <span class="text">Message</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class='bx bxs-group' ></i>
                <span class="text">Team</span>
            </a>
        </li>
    </ul>
    <ul class="side-menu">
        <li>
            <a href="#">
                <i class='bx bxs-cog' ></i>
                <span class="text">Settings</span>
            </a>
        </li>
        <li>
            <a href="{{ path('app_logout') }}" class="logout">
                <i class='bx bxs-log-out-circle' ></i>
                <span class="text">Logout</span>
            </a>
        </li>
    </ul>
</section>
<!-- SIDEBAR -->

<!-- CONTENT -->
<section id="content">
    

    <!-- MAIN -->
    <main>
        <div class="container mt-4">
            <h1>Réclamations résolues</h1>

            {% if reclamations is empty %}
                <div class="alert alert-info">
                    Aucune réclamation résolue pour le moment.
                </div>
            {% else %}
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Description</th>
                                <th>Catégorie</th>
                                <th>Date de création</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for reclamation in reclamations %}
                                <tr>
                                    <td>#{{ reclamation.id }}</td>
                                    <td>{{ reclamation.description|slice(0, 100) }}...</td>
                                    <td>{{ reclamation.categorie }}</td>
                                    <td>{{ reclamation.dateCreation|date('d/m/Y H:i') }}</td>
                                    <td>
                                        <a href="{{ path('app_reclamation_show', {'id': reclamation.id}) }}" class="btn btn-sm btn-info">
                                            <i class="fas fa-eye"></i> Voir
                                        </a>
                                        <form method="post" action="{{ path('app_reclamation_archive', {'id': reclamation.id}) }}" style="display: inline-block">
                                            <input type="hidden" name="_token" value="{{ csrf_token('archive' ~ reclamation.id) }}">
                                            <button class="btn btn-sm btn-secondary" onclick="return confirm('Êtes-vous sûr de vouloir archiver cette réclamation ?')">
                                                <i class="fas fa-archive"></i> Archiver
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% endif %}

            <a href="{{ path('app_admin_dashboard') }}" class="btn btn-primary">
                <i class="fas fa-arrow-left"></i> Retour au tableau de bord
            </a>
        </div>
    </main>
    <!-- MAIN -->
</section>
<!-- CONTENT -->
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('dashboard/script.js') }}"></script>
{% endblock %} 